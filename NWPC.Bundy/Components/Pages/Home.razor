@page "/"
@rendermode InteractiveServer

<PageTitle>NWPC Bundy Clock</PageTitle>

<div class="background-container">

    <!-- NWPC Logo -->
    <img src="images/nwpc-logo-for-header.png" class="nwpc-banner" alt="NWPC Logo">

    <!-- Objects for Top part of the web app -->
    <div class="top-border">
    </div>
    <div class="second-top-border"></div>
    <div class="third-top-border"></div>
    <!-- End of Objects for Top part -->

    <div class="bundy-container">
        <div class="current-date-time">
            <p class="current-time" id="current-time"></p>
            <p class="current-day-date" id="current-day-date"></p>
        </div>
    </div>

    <div class="bundy-container-two"></div>

    <!-- Objects for Bottom part of the web app -->
    <div class="bottom-border"></div>
    <div class="second-bottom-border"></div>
    <div class="third-bottom-border"></div>
    <!-- End of Objects for Bottom part -->

    <div class="numpad-container">
        <div class="numpad">
            <button class="digit" onclick="updateInput('1')">1</button>
            <button class="digit" onclick="updateInput('2')">2</button>
            <button class="digit" onclick="updateInput('3')">3</button>
            <button class="digit" onclick="updateInput('4')">4</button>
            <button class="digit" onclick="updateInput('5')">5</button>
            <button class="digit" onclick="updateInput('6')">6</button>
            <button class="digit" onclick="updateInput('7')">7</button>
            <button class="digit" onclick="updateInput('8')">8</button>
            <button class="digit" onclick="updateInput('9')">9</button>
            <button class="digit dum"></button>
            <button class="digit" onclick="updateInput('0')">0</button>
            <button class="digit del" onclick="deleteLast()">&#9003;</button>
        </div>
    </div>

    <!-- Forms for Bundy Selection and ID -->
    <div class="forms-container">
        <fieldset class="fieldset-forms">
            <legend style="color: #65657b; font-family: Arial, sans-serif;">Select Bundy Type:</legend>
        </fieldset>
        <div class="input-container ic1">
            <input id="employeeID" class="input" type="text" placeholder=" " disabled />
            <div class="cut"></div>
            <label for="employeeID" class="placeholder">Employee ID</label>
        </div>
        <button type="text" class="submit">Submit</button>
    </div>

</div>

@code {
    private DateTime CurrentDateTime { get; set; }

    protected override async Task OnInitializedAsync()
    {
        CurrentDateTime = DateTime.UtcNow.AddHours(8); // Set initial time

        // Update the time every second
        var timer = new System.Threading.Timer(async _ =>
        {
            CurrentDateTime = DateTime.UtcNow.AddHours(8);
            await InvokeAsync(StateHasChanged); // Notify Blazor that the state has changed
        }, null, TimeSpan.Zero, TimeSpan.FromSeconds(1));
    }
}

<script>
    function updateTime() {
        var now = new Date();
        var timeString = now.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit', second: '2-digit' });
        var dayString = now.toLocaleDateString('en-US', { weekday: 'long' });
        var dateString = now.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

        // Concatenate day and date strings
        var dayDate = dayString + ", " + dateString;

        document.getElementById('current-time').textContent = timeString;
        document.getElementById('current-day-date').textContent = dayDate;
    }

    // Call updateTime function every second to update the time dynamically
    setInterval(updateTime, 1000);

    // Initial call to display time immediately
    updateTime();

    function updateInput(value) {
        document.getElementById('employeeID').value += value;
    }

    function deleteLast() {
        var input = document.getElementById('employeeID');
        input.value = input.value.slice(0, -1);
    }
</script>
